<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[MXOXW]]></title>
  <subtitle><![CDATA[Life always finds a way.]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://www.mxoxw.com/"/>
  <updated>2019-12-11T02:47:27.000Z</updated>
  <id>http://www.mxoxw.com/</id>
  
  <author>
    <name><![CDATA[Wind]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[whistle.xxtpl]]></title>
    <link href="http://www.mxoxw.com/b/2019/12/whistle-xxtpl/"/>
    <id>http://www.mxoxw.com/b/2019/12/whistle-xxtpl/</id>
    <published>2019-12-09T13:13:57.000Z</published>
    <updated>2019-12-11T02:47:27.000Z</updated>
    <content type="html"><![CDATA[<p>自适应callback返回json/jsonp</p>
<p>匹配方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pattern xxtpl:<span class="comment">//&#123;res.json&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>其中，<code>pattern</code> 表示匹配请求url的表达式，可以为域名（如：<code>www.test.com xxtpl://{res.json}</code>）、路径，通配符、正则表达式等，具体参见：<a href="http://wproxy.org/whistle/pattern.html" target="_blank" rel="external">whistle的匹配模式</a>。</p>
</blockquote>
<h2 id="安装">安装</h2><ol>
<li><p>首先需要安装最新版<a href="https://github.com/avwo/whistle" target="_blank" rel="external">whistle</a>，如果你的机器已经安装了whistle，请确保whistle为最新版本：</p>
<ul>
<li>安装及如何使用whistle参见<a href="https://github.com/avwo/whistle" target="_blank" rel="external">Github</a></li>
<li>如何升级whistle参见<a href="http://wproxy.org/whistle/update.html" target="_blank" rel="external">帮助文档</a>。</li>
</ul>
</li>
<li><p>安装xxtpl插件，执行npm全局安装即可：</p>
</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g whistle.xxtpl</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果是Linux或Mac，可能需要用 <code>sudo npm i -g whistle.xxtpl</code>，推荐使用<a href="https://github.com/cnpm/cnpm" target="_blank" rel="external">cnpm</a>或自己公司提供的npm镜像安装</p>
</blockquote>
<p>详细信息查看 <a href="https://github.com/wolfsilver/whistle.xxtpl" target="_blank" rel="external">https://github.com/wolfsilver/whistle.xxtpl</a></p>
]]></content>
    <summary type="html">
    <![CDATA[whistle.xxtpl whistle auto response with json or josnp according to the callback parameter whistle根据callback参数自动返回json或jsonp]]>
    
    </summary>
    
      <category term="whistle" scheme="http://www.mxoxw.com/tags/whistle/"/>
    
      <category term="whistle js" scheme="http://www.mxoxw.com/categories/whistle-js/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[2018-11-01面试]]></title>
    <link href="http://www.mxoxw.com/b/2018/11/2018-11-01-mian-shi/"/>
    <id>http://www.mxoxw.com/b/2018/11/2018-11-01-mian-shi/</id>
    <published>2018-11-01T13:34:59.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<p>数组ES6常用方法<br>正则<br>架构设计<br>金额千分位正则处理<br>项目里有印象的事</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>数组ES6常用方法<br>正则<br>架构设计<br>金额千分位正则处理<br>项目里有印象的事</p>
]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[2018年8月25日 面试]]></title>
    <link href="http://www.mxoxw.com/b/2018/08/2018-nian-8-yue-25-ri-mian-shi/"/>
    <id>http://www.mxoxw.com/b/2018/08/2018-nian-8-yue-25-ri-mian-shi/</id>
    <published>2018-08-25T03:36:30.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<p>csrf问题已经防范措施<br>性能优化<br>弱网络环境的可用性</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>csrf问题已经防范措施<br>性能优化<br>弱网络环境的可用性</p>
]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[多域名单证书]]></title>
    <link href="http://www.mxoxw.com/b/2018/02/duo-yu-ming-dan-zheng-shu/"/>
    <id>http://www.mxoxw.com/b/2018/02/duo-yu-ming-dan-zheng-shu/</id>
    <published>2018-02-28T07:11:40.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<p>Let’s Encrypt 添加多域名单证书<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certbot certonly --webroot -w /home/wwwroot/default -d <span class="tag">a</span><span class="class">.com</span> -d <span class="tag">b</span>.com</span><br></pre></td></tr></table></figure></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Let’s Encrypt 添加多域名单证书<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><]]>
    </summary>
    
      <category term="Let’s Encrypt" scheme="http://www.mxoxw.com/tags/let%E2%80%99s-encrypt/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[VS Code自定义高亮]]></title>
    <link href="http://www.mxoxw.com/b/2018/01/vs-code-zi-ding-yi-gao-liang/"/>
    <id>http://www.mxoxw.com/b/2018/01/vs-code-zi-ding-yi-gao-liang/</id>
    <published>2018-01-08T06:07:54.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<p>html里自定义模版，不能自动识别高亮，可以修改文件<code>..\Microsoft VS Code\resources\app\extensions\html\syntaxes\html.json</code></p>
<p>v1.22 <code>..\Microsoft VS Code\resources\app\extensions\html\syntaxes\html.tmLanguage.json</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">"<span class="operator"><span class="keyword">begin</span><span class="string">": "</span>(?=(?<span class="keyword">i</span>:<span class="keyword">type</span>\\s*=\\s*(<span class="string">'|\"|)(text/(x-handlebars|(x-(handlebars-)?|ng-|ath-)?template|html)[\\s\"'</span>&gt;])))<span class="string">",</span><br><span class="line">"</span><span class="keyword">end</span><span class="string">": "</span>((&lt;))(?=/(?<span class="keyword">i</span>:script))<span class="string">",</span><br><span class="line">"</span>endCaptures<span class="string">": &#123;</span><br><span class="line">    "</span><span class="number">0</span><span class="string">": &#123;</span><br><span class="line">        "</span><span class="keyword">name</span><span class="string">": "</span>meta.tag.metadata.script.html<span class="string">"</span><br><span class="line">    &#125;,</span><br><span class="line">    "</span><span class="number">1</span><span class="string">": &#123;</span><br><span class="line">        "</span><span class="keyword">name</span><span class="string">": "</span>punctuation.definition.tag.<span class="keyword">begin</span>.html<span class="string">"</span><br><span class="line">    &#125;,</span><br><span class="line">    "</span><span class="number">2</span><span class="string">": &#123;</span><br><span class="line">        "</span><span class="keyword">name</span><span class="string">": "</span><span class="built_in">text</span>.html.basic<span class="string">"</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span></span></span><br></pre></td></tr></table></figure>
<p>可以支持ath-template模版高亮<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/ath-template"</span>&gt;</span><span class="javascript"></span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"txt"</span>&gt;</span><br><span class="line">    	Hello World!</span><br><span class="line">    <span class="xml"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>html里自定义模版，不能自动识别高亮，可以修改文件<code>..\Microsoft VS Code\resources\app\extensions\html\syntaxes\html.json</code></p>
<p>v1.22 <code>..\Micros]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[2018]]></title>
    <link href="http://www.mxoxw.com/b/2018/01/2018/"/>
    <id>http://www.mxoxw.com/b/2018/01/2018/</id>
    <published>2018-01-01T11:55:46.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<p>Happy New Year!</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Happy New Year!</p>
]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[Install nslookup on CentOS]]></title>
    <link href="http://www.mxoxw.com/b/2017/11/install-nslookup/"/>
    <id>http://www.mxoxw.com/b/2017/11/install-nslookup/</id>
    <published>2017-11-16T01:44:54.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<p>使用nslookup命令时，提示<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-<span class="string">bash:</span> <span class="string">nslookup:</span> command not found</span><br></pre></td></tr></table></figure></p>
<p>使用下面命令安装即可<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install <span class="built_in">bind</span>-utils</span><br></pre></td></tr></table></figure></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>使用nslookup命令时，提示<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td cla]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[nginx修改server header]]></title>
    <link href="http://www.mxoxw.com/b/2017/11/nginx-xiu-gai-server/"/>
    <id>http://www.mxoxw.com/b/2017/11/nginx-xiu-gai-server/</id>
    <published>2017-11-15T09:43:05.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<p>nginx自定义server<br>修改nginx的名称，隐藏版本号，既增加安全性又可以用来装逼。<br>nginx展示名称的地方，通常有Response Header中的server，错误页等。</p>
<p>修改几个位置如下：</p>
<h2 id="修改src/core/nginx-h">修改src/core/nginx.h</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hexcolor">#def</span>ine NGINX_VERSION      <span class="string">"1.12.1"</span></span><br><span class="line"><span class="hexcolor">#def</span>ine NGINX_VER          <span class="string">"NGINX/"</span> NGINX_VERSION</span><br></pre></td></tr></table></figure>
<h2 id="修改src/http/ngx_http_header_filter_module-c">修改src/http/ngx_http_header_filter_module.c</h2><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">static u_char ngx_http_server_string<span class="string">[]</span> = <span class="string">"Server: nginx"</span> CRLF;</span><br></pre></td></tr></table></figure>
<h2 id="修改src/http/ngx_http_special_response-c">修改src/http/ngx_http_special_response.c</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">static u_char ngx_http_error_tail[] =</span><br><span class="line">"<span class="tag">&lt;<span class="title">hr</span>&gt;</span><span class="tag">&lt;<span class="title">center</span>&gt;</span>nginx<span class="tag">&lt;/<span class="title">center</span>&gt;</span>" CRLF</span><br><span class="line">"<span class="tag">&lt;/<span class="title">body</span>&gt;</span>" CRLF</span><br><span class="line">"<span class="tag">&lt;/<span class="title">html</span>&gt;</span>" CRLF</span><br><span class="line">;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>对于http2，还需要修改</p>
<h2 id="修改src/http/v2/ngx_http_v2_filter_module-c">修改src/http/v2/ngx_http_v2_filter_module.c</h2><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">static const u_char nginx<span class="special">[</span>5<span class="special">]</span> = "<span class="command">\x</span>84<span class="command">\xaa</span><span class="command">\x</span>63<span class="command">\x</span>55<span class="command">\xe</span>7";</span><br></pre></td></tr></table></figure>
<p>此处的内容经过压缩编码，可以使用工具<a href="https://github.com/ScottHelme/HPACK-Encode" target="_blank" rel="external">HPACK-Encode</a>转换。<br>已经编译过的，可以直接下载<a href="https://github.com/wolfsilver/wolfsilver.github.io/files/1474178/go.zip" target="_blank" rel="external">go.zip</a><br>使用方法<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go<span class="class">.exe</span> <span class="string">"nginx"</span></span><br></pre></td></tr></table></figure></p>
<h2 id="重新编译nginx">重新编译nginx</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">nginx</span> -V</span><br></pre></td></tr></table></figure>
<p>查看对应的nginx版本，以及编译配置信息<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">.</span>/configure <span class="attribute">...</span><span class="attribute">...</span></span><br><span class="line">make</span><br></pre></td></tr></table></figure></p>
<p>完成之后，杀掉所有nginx进程<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">killall</span> nginx</span><br><span class="line">killall nginx</span><br></pre></td></tr></table></figure></p>
<p>备份之前的版本<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp <span class="regexp">/usr/</span>local<span class="regexp">/nginx/</span>sbin<span class="regexp">/nginx /u</span>sr<span class="regexp">/local/</span>nginx<span class="regexp">/sbin/</span>nginx.bak</span><br></pre></td></tr></table></figure></p>
<p>用新版本替换<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp .<span class="regexp">/objs/</span>nginx <span class="regexp">/usr/</span>local<span class="regexp">/nginx/</span>sbin<span class="regexp">/</span></span><br></pre></td></tr></table></figure></p>
<p>重启<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx</span><br></pre></td></tr></table></figure></p>
<p>以上</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>nginx自定义server<br>修改nginx的名称，隐藏版本号，既增加安全性又可以用来装逼。<br>nginx展示名称的地方，通常有Response Header中的server，错误页等。</p>
<p>修改几个位置如下：</p>
<h2 id="修改src/core/nginx-h">修改src/core/nginx.h</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hexcolor">#def</span>ine NGINX_VERSION      <span class="string">"1.12.1"</span></span><br><span class="line"><span class="hexcolor">#def</span>ine NGINX_VER          <span class="string">"NGINX/"</span> NGINX_VERSION</span><br></pre></td></tr></table></figure>
<h2 id="修改src/http/ngx_http_header_filter_module-c">修改src/http/ngx_http_header_filter_module.c</h2><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">static u_char ngx_http_server_string<span class="string">[]</span> = <span class="string">"Server: nginx"</span> CRLF;</span><br></pre></td></tr></table></figure>
<h2 id="修改src/http/ngx_http_special_response-c">修改src/http/ngx_http_special_response.c</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">static u_char ngx_http_error_tail[] =</span><br><span class="line">"<span class="tag">&lt;<span class="title">hr</span>&gt;</span><span class="tag">&lt;<span class="title">center</span>&gt;</span>nginx<span class="tag">&lt;/<span class="title">center</span>&gt;</span>" CRLF</span><br><span class="line">"<span class="tag">&lt;/<span class="title">body</span>&gt;</span>" CRLF</span><br><span class="line">"<span class="tag">&lt;/<span class="title">html</span>&gt;</span>" CRLF</span><br><span class="line">;</span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
      <category term="nginx" scheme="http://www.mxoxw.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[邬迪：乌云完成了使命]]></title>
    <link href="http://www.mxoxw.com/b/2017/11/wu-di-wu-yun-wan-cheng-liao-shi-ming/"/>
    <id>http://www.mxoxw.com/b/2017/11/wu-di-wu-yun-wan-cheng-liao-shi-ming/</id>
    <published>2017-11-14T12:21:36.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<p>邬迪：乌云完成了使命 | 乌云回忆录（一）</p>
<blockquote>
<p>from: <a href="https://mp.weixin.qq.com/s/GmRXqg4ay_Q5nr2x-0E41g" target="_blank" rel="external">https://mp.weixin.qq.com/s/GmRXqg4ay_Q5nr2x-0E41g</a></p>
<p>《乌云回忆录》，是科技自媒体浅黑科技出品的专题。<br>2016年漏洞平台乌云关停。时隔一年，我试图走访那些和乌云相关的人，了解他们对网络安全、白帽子黑客，以及这个世界的看法。愿这些记录可以引发更多人的思考。<br>每个人都有自己的立场和理由，他们的愤怒、恐惧和自私本就情有可原。我只祈祷自己有一双忠诚的眼睛，注脚这个世界的美好或荒凉。<br>本文是对前乌云合伙人邬迪的采访，是为《乌云回忆录》第一篇。</p>
</blockquote>
<h2 id="邬迪：乌云完成了使命">邬迪：乌云完成了使命</h2><blockquote>
<p>乌云完成了它的使命。</p>
</blockquote>
<p>邬迪说。</p>
<p>邬迪，前漏洞平台“乌云”合伙人，如今他加入了一家安全创业公司。</p>
<p>2016年7月20日，乌云页面突然显示“升级公告”，关闭至今。2017年11月12日，距离“乌云事件”480天，我坐在邬迪对面。这个故事的另一个主人公是方小顿，人称剑心，“乌云”创始人。和邬迪一样，方小顿也在等待乌云事件最终的结果。</p>
<p>在一家咖啡馆里，邬迪和我讲了一些被尘封的往事：</p>
<h2 id="（一）">（一）</h2><p>我认识方小顿，是在2012年。</p>
<p>那是我在老牌 IT 公司深信服工作的第7年。</p>
<p>有同事找到我说，有个叫做“乌云”的媒体曝光了我们产品的一个漏洞。作为品牌总监，我得想办法“平事儿”。</p>
<p>我设法找到了乌云联系人的电话，电话那头传来了方小顿沙哑的声音。</p>
<p>他说，乌云不是媒体，而是漏洞平台。漏洞是民间的“白帽子黑客”提交的，把漏洞公开就是为了让中国的企业都能够重视网络安全。我说，太感谢了，我们已经重视了，并且修复了漏洞，是否有可能把帖子删掉呢？他说，这个恐怕没可能。只要发到乌云网站上的漏洞，就没有办法删除。每个帖子，都是一盏警示灯，灯亮得足够多，企业才会足够重视自己的安全建设。</p>
<p>我有点奇怪，这个人的话语逻辑里不包含“钱”。于是我搜索了“方小顿”，知道他是一个资深的安全专家。曾经供职百度，还和李彦宏一起上过《天天向上》，唱了一首惨不忍睹的歌。除此之外，别无其他。</p>
<p>几个星期以后，我北上北京，专门约他喝咖啡。</p>
<p>希格玛大厦的硬盘咖啡，我见到了他。长发及肩，不修边幅，牛仔裤、旧短袖、夹板拖鞋，声调不高但逻辑清楚。挺黑客的。</p>
<p>我再一次提出删帖的要求，暗示可以出些钱，他拒绝了。做了这么多年市场，我能听出来一个人是否真的不想要钱。于是我死心了，反倒对“乌云”有了更多的兴趣。</p>
<p>方小顿说，离开百度时他的级别是 T7，如果继续待下去还能更高，这个级别意味着衣食无忧前程似锦。但他坚信自己另有使命。他说安全圈太封闭了，这么多互联网公司漏洞百出，个人信息不断被黑客窃取，电信诈骗、网络攻击已经到了令人发指的地步。然而公众却没有渠道得知真相，任由自己的隐私权利被贩卖和侵害。需要有人把真相说出来，他深信做这件事的人应该是自己。</p>
<p>他设想的模式是：</p>
<blockquote>
<p>鼓励“白帽子黑客”——民间对网络安全技术感兴趣的技术人员——提交各个企业的漏洞，乌云审核之后无条件公开。白帽子在这个平台上获得认可、技术交流和荣誉感，企业在这里获得自己的漏洞详情和危机感，鞭策自己提高安全性。</p>
</blockquote>
<p>这就是后来著名的<strong>“乌云模式”</strong>。这个模式让当时的我热血沸腾，当然后来也改写了我们所有人的命运。</p>
<p>两年以后，我选择加入乌云。另一位创始人“疯狗”跟我回忆，我认识方小顿的2012年乌云已经成立三年，那时只有两三个人，所有人住在民宅里，不仅不领工资，而且都是把自己的积蓄在往里填。他们相信自己在做一件伟大的事。<br><a id="more"></a></p>
<h2 id="（二）">（二）</h2><p>自从认识了方小顿，每次去北京，我都会约他聊聊。</p>
<p>特别是当我发现，我们的很多同行，甚至是安全能力很强的 BAT，都在乌云上被“白帽子”爆出过漏洞，公司从上到下也开始放下对乌云敌意，甚至我们的技术人员也会在乌云上查看同类产品被爆出什么漏洞，然后赶快检查自家的产品有没有问题。</p>
<p>2013年，深信服要推一个重磅产品：下一代防火墙。</p>
<p>在推出之前，本着对用户负责的态度，我们希望自己先对产品做一个深度的安全测试。于是我们找到了一家广东省内的安全公司，他们按照“Check List”逐项作了检查，结论是产品没有漏洞，很安全。</p>
<p>虽然有这个结果，但贸然发布产品我们觉得还是有些草率，于是我想起了方小顿。我问他乌云是否能做“安全测试”这种工作。</p>
<p>他想到一个方法，我们把防火墙映射在一个网络地址上，乌云组织天南海北的“白帽子”在网上对这个产品发起测试。发现漏洞，我们就付费给白帽子。</p>
<p>这就是后来乌云推出的第一款产品“乌云众测”。深信服是它的第一个客户。那次众测，白帽子找到了产品的十多个高中危漏洞，和之前的“0漏洞报告”一对比，我们挺震惊的。</p>
<p>2014年4月，方小顿突然给我发来了一些截图，是一份测试报告，来自“乌云众测”。虽然上面的公司名称打了码，但我能看到众测给这家公司找到了上百个安全漏洞。<br>在QQ上，他问我，现在乌云众测做得很好，团队还计划做新产品，愿不愿意来乌云？</p>
<p>当时，我挺心动的。我可能是一个理想主义者，一直迷恋一种体验：在早期加入一家伟大的公司，和大家一起改变行业，创造历史。</p>
<p>以当时我对“乌云模式”的判断，还有对“乌云众测”的了解，我觉得乌云未来是一定能够被写进中国网络安全历史的。</p>
<p>只不过，我当时已经在深圳成家，按照世俗的眼光看，该有的也都有了，原本没有任何换工作的想法。</p>
<p>我住的小区盖在一座山上，收到邀请的那一个月，每天7点吃完饭后，我就到山上去散步，有时自己，有时和妻子一起，思考自己的选择，每天直到快到10点才回家。</p>
<p>2014年的北京雾霾肆虐，我很抵触。不仅如此，如果加入乌云，股票归零，工资减半，奖金全无。我记得在最纠结的时候，我妻子突然转过身对我说：钱什么时候都可以赚，但一生之中寻找<strong>理想</strong>的机会并不常有。现在闭上眼，她当时的眼神就浮现在面前。</p>
<p>最后我决定，用手中的这一切，换乌云的未来。</p>
<p>但我不觉得父母可以理解我的选择。为了让父母不担心，我说深信服在北京投资了一家公司叫“乌云”，我被派驻到那里负责管理。</p>
<h2 id="（三）">（三）</h2><p>正式上班第一天，邬迪才第一次走进乌云的办公室。</p>
<p>那时候乌云刚刚搬到上地，嘉华大厦。这间办公室的上一任主人是“火币网”。除了剑心，疯狗，瞌睡龙，邬迪这几个合伙人老一点，是八零后，其他十来个人都是九零后。</p>
<p>邬迪回忆，有人十一点来，有人下午才来，有点散漫。不过每个人都是绝顶高手，张口闭口都是技术，午饭时都没人讨论其他话题。他们热爱安全，热爱乌云所作的事情，并且对所有试图遮盖或掩饰安全问题的行为表示不齿。他们是一群理想主义者。</p>
<p>“你有没有想过，正是理想主义才让乌云被关？”我问。</p>
<p>“是的。”他想了想，“但现实主义者不会做乌云。”</p>
<p>也正是在那个时候，他开始认真地了解<strong>“白帽子”</strong>这个群体。</p>
<p>黑客本身就是反叛精神的载体，白帽子也是这样一群特殊的技术群体。很多白帽子黑客都是高中毕业、大学肄业，诸如此类。他们当中相当一部分不满学校教育，自学计算机知识。邬迪觉得这些人中“鬼才”居多，但社会并没有给他们足够的空间。</p>
<blockquote>
<p>以前，因为学历的问题，很多白帽子很难跨进大公司的门槛。 </p>
<p>但有了乌云以后，他们可以在上面提交漏洞，获得社区和公众的注意，同时证明自己的技术能力，通过这些在一家大公司获得一份体面的工作和不菲的收入。面对黑产的诱惑，他们可以更坚决地说不。也许乌云让这个群体从此远离了网络犯罪，给他们一种新的人生可能。</p>
</blockquote>
<p>邬迪回忆。</p>
<p>但同时，在这些白帽子里分化出了另一个更为特殊的群体。他们在乌云体系里成为了<strong>“核心白帽子”</strong>。</p>
<p>这些核心白帽子往往能够“以一敌百”，发现其他白帽子无法发现的巨大漏洞，这些漏洞曝光出来，甚至可以在舆论中造成轩然大波，例如，2014年3月，乌云突然曝光携程网泄露公民信用卡信息；2015年，乌云曝光12306大量乘客信息泄露。这些曝光都直接推动了网络安全的历史进程。</p>
<p>根据邬迪的观察，核心白帽子和普通白帽子有很大的区别。他们往往是高知，有的是博士毕业，有一份工资很高的工作，但生活很简朴甚至无趣。挖漏洞更多出于爱好。比起钱来，他们更在乎自己“天下无贼”的梦想。</p>
<p>接连曝光了一些重要的漏洞之后，邬迪对这些核心白帽子从好奇转变成了敬佩。他依然能回忆起一些故事：</p>
<blockquote>
<p>白帽子A，测试了特斯拉的网站，本来预定一台 Model S 电动汽车需要网上支付30万的定金，而他通过漏洞，只需要1块钱就可以达到预付30万的效果。</p>
<p>他把漏洞提交给特斯拉之后，特斯拉为了表彰他的贡献，告诉他这1块钱就认定为30万，只要他缴纳余款就能提走一辆车。他家境不错，买特斯拉不成问题，但他拒绝了。</p>
<p>他说自己这么做只是为了找到漏洞，不是为了这份奖励。</p>
</blockquote>
<p>无论漏洞多么严重，乌云都会强制公开。态度和当年方小顿对待深信服的邬迪别无二致。</p>
<p>这些“乌云核心白帽子”搅动了整个中国互联网，恨和爱由此开始交织。有关“乌云模式”的讨论也甚嚣尘上。保守主义者认为<strong>“进步需要时间”</strong>，激进主义者认为<strong>“矫枉必须过正”</strong>。</p>
<p>身处白帽子群体，邬迪虽然不搞黑客技术，也能经常接到黑产发来的邮件。有的邮件里言辞闪躲，留下一个QQ号，出于好奇他会去搜索，一看签名里面全是“黑话”，就知道这是个搞黑产的。有人甚至直接打来电话，说你帮我搞一个网站，先给你打过去100万，事成之后再给你200万。</p>
<p>“那些白帽子同事接到的邮件和电话就更多了。他们经常把黑产和他们对话的截图发到公司的群里，每一单都值一辆车，而对他们的技术水平来说，赚这些钱只需要动动手指。但大家都当成笑话说，没人真去接单。虽然他们有的人想买房，当时确实很缺钱。”他说。</p>
<p>“你怎么确定他们没有心动去做了黑产？”我问。</p>
<p>“因为直到最后那些同事还在租房，还在找我们借钱。”他说。</p>
<p>除了要抵抗金钱的诱惑，白帽子们还要应对外界的各种质疑甚至威胁。</p>
<blockquote>
<p>曾经有很知名的巨头企业给乌云内部的工作人员打电话，在电话里一字不差的说出了这名同事的姓名、身份证号和家庭住址，暗示如果乌云上再出现他们的漏洞就会采取“必要的行动”。如果说不害怕那是假话。但一夜过后，第二天上班他仍然该怎么做就怎么做。</p>
</blockquote>
<p>邬迪说。</p>
<p>依靠这样一群散发着理想主义光芒的白帽子，那几年乌云毫不意外地进入了爆发期，因为不断曝光网络的黑暗阴影而屡上头条，被大众所知。方小顿成为某种黑客精神的旗手。白帽子们虽然散落在互联网各个地方，拥有不同的教育背景，从事着不同的主业，但都同时聚集在这面旗帜下。他们之中有些铁粉，纷纷选择加入了乌云，成为了几十名员工之一，为之后的产品“乌云众测”和“Tangscan”贡献力量。</p>
<p>我问邬迪，现在他究竟怎么看待白帽子这个群体。</p>
<p>他想了想，把中国黑客历史分为三个阶段：</p>
<blockquote>
<p><strong>黑客时代</strong>：从上世纪90年代到10年之前，没有纯粹的白帽子和黑帽子之分。黑客可能会给企业提交漏洞，但是没有可预期的回报，他们可能也会做黑产，利用自己的技术犯罪。同一个人也许有黑白两个身份，没有清晰的边界。</p>
<p><strong>前白帽时代</strong>：从2010年乌云建立开始，黑客渐渐分化成了两个群体：白帽子和黑帽子。代表理想主义情怀的白帽子在发现企业漏洞之后，提交到乌云或其他平台，获得声望；而代表现实主义的黑帽子发现漏洞之后，卖给地下黑产，和这个世界玩捉迷藏。</p>
<p><strong>后白帽时代</strong>：2016年“世纪佳缘案”和“乌云事件”之后，白帽子群体分化，有些白帽子选择了“授权测试”的平台，完全守法，不再公开漏洞。有些白帽子转而从事其他职业，有一部分边缘白帽子转入黑产，进入地下。目前来看，他们从公众的视野里消失了。</p>
</blockquote>
<h2 id="（四）">（四）</h2><p>2016年6月，就在“乌云事件”的一个月前，方小顿在QQ上给我发来信息：<strong>“我想把乌云主站关掉。”</strong></p>
<p>我感到错愕。</p>
<p>我猜他一定知道了什么，或者至少感觉到了什么，但到最后他都没有和我说。</p>
<p>我记得很清楚，我抬起头，看着屋子外面坐着的一群年轻人。他们是因为我们，因为乌云，或者说因为某种理想才坐在这里。“关掉乌云可以，但他们怎么办？”我觉得我们对于这些单纯又有理想的九零后负有不可推卸的责任。</p>
<p>但一个月后发生的事情证明我们不仅不是救世主，也许还正好相反。</p>
<p>我总在想，如果我们能够不那么自以为是，不那么悲天悯人，早点关闭乌云，事情可能会有所不同。但，没有人是神。</p>
<p>后来有人问我，你恨不恨方小顿。我说不恨，他已经尽力了，如果我是他，也许做得不如他好。当然如果有机会，我们应该和相关部门有更多的沟通。</p>
<p>2016年7月初，乌云大会召开，我们专门攒了一个论坛，拉来了白帽子、网络取证专家、公安机关领导，探讨“漏洞机制”这件事。我记得方小顿在台上，不遗余力地为“乌云模式”站台。但当时他内心究竟在涌动着怎样的情绪，可能谁都无法了解。</p>
<p>10天后，发生了安全圈甚至大半个互联网圈都知道的事情。</p>
<h2 id="（五）">（五）</h2><p>时隔很久，我才第一次打开手机。</p>
<p>那是一台 iPhone，性能不错。但手机就像死机了一样，震了几十分钟。熟悉的人，不熟悉的人，媒体、客户、很久不联系的朋友，他们发来的微信还没来得及闪现，就被其他人的消息顶到了后面。他们关心地询问我的近况，同时小心地避开我的伤口。未接电话的提醒短信一个接一个，仿佛没有休止的一刻。</p>
<p>我告诉父母，我从未想过要去做一件坏事，但结果也许不尽如人意。</p>
<p>他们说，你不用说了，我们了解自己的儿子。你回来就好。</p>
<p>那几个月，我发誓要加入一个大公司。这样也许今后的人生就不会有这么多风险，就像当年方小顿如果不离开百度，他的生命将会平稳安定，将会衣食无忧，后面发生的一切都不过是一场虚幻的梦。</p>
<p>随后也确实有挺多大公司向我伸出了橄榄枝，我准备挑选其中一家。</p>
<p>然而，有一天半夜，我突然醒来。我好像看到方小顿走到我面前。我好像看到了乌云的兄弟姐妹，看到了那些为了理想不怕威胁不计回报的白帽子。他们轻声问我，是不是还像当年一样渴望亲自参与一次伟大的创业，是不是还像当年一样梦想做一个可以被铭记的人。我坐起身来看向窗外，夜色如海，上帝在沉默。</p>
<p>几秒种后，我想通了，像个婴儿一样沉沉睡去。那天晚上，我做了此生最美的梦。</p>
<p>我拒绝了大公司的邀请，最终又加入了一家网络安全创业公司。<strong>我猜，对于理想主义者来说，有些事情是注定的，坚硬的，赴汤蹈火的，无法更改的。</strong></p>
<p>乌云出事后很多人问我，辞掉深信服来乌云，是不是挺后悔的？你可能不信，我并不后悔。</p>
<p>我在电话里告诉身在老家的父亲，说我还是决定加入一家创业公司。父亲说，我支持你，因为我早就知道，我的儿子无论经历过什么，都能有勇气重头再来。</p>
<p>他说，我为你感到骄傲。</p>
<h2 id="（六）">（六）</h2><p>邬迪叠好回忆，望向窗外。</p>
<p>外面天色湛蓝，像是舒展了半生的愁眉。</p>
<p>“乌云完成了它的使命，是时候说再见了。”他说。</p>
<p>我顺着他的目光极目远眺，万里无云。</p>
<p>“为什么？”我问。</p>
<blockquote>
<p><strong>之前很长时间，我都以为是乌云创造了历史。但现在我知道，是历史选择了乌云。</strong></p>
<p><strong>那个时代互联网爆炸式发展，而网络安全没人重视。网络犯罪行为越来越多，但没人告诉大众，他们究竟是如何被侵害的。面对那个坠落的世界，需要有人站出来——这个喊出皇帝新衣的小孩，恰好是我们。</strong></p>
<p><strong>人们总在争论乌云的模式是否极端、披露漏洞是否要授权，但在那个时代里，我们别无选择。</strong></p>
<p><strong>你明白吗，别无选择。</strong></p>
</blockquote>
<p>他盯着我，说。</p>
<p>“那个时代还在吗？”</p>
<p>“不在了。乌云随着这个时代开始，也随着这个时代结束了。”</p>
<p>“那个时代，还有遗憾吗？”</p>
<p>“我们让网络安全问题从封闭的小群体走向了大众的视野，让整个社会开始重视安全。乌云没有遗憾。”</p>
<p>“原来那些乌云的白帽子，现在在哪里？”</p>
<p>“有一部分移民海外了，从此没了音信。还有些人暂时放弃了安全，成为一名普通的程序员。4月份时我见到了一位核心白帽子B，他曾依靠一己之力改变了中国网络安全的进程。如今他在一家大企业做程序员，白天坐在西二旗的格子里写代码，晚上回到回龙观的格子里写代码。”</p>
<p>“不挖漏洞了吗？”</p>
<p>“不挖了。”</p>
<p>“你和他说什么了吗？”</p>
<p>“我说我感到悲凉。”</p>
<p>“白帽子们都离开了吗？”</p>
<p>“我更愿意相信，他们在等待。”</p>
<p>“等待什么？”</p>
<p>“当时代需要时，他们勇敢地站了出来。当潮水退去时，他们等待新的使命。他们等待被抛弃或被怀念，等待这个世界告诉他们善恶和对错。”</p>
<p><img src="https://user-images.githubusercontent.com/2452450/32780147-358d8d0e-c97b-11e7-8a27-113b452e9abd.jpg" alt="邬迪"></p>
<p>end </p>
]]></content>
    <summary type="html">
    <![CDATA[<p>邬迪：乌云完成了使命 | 乌云回忆录（一）</p>
<blockquote>
<p>from: <a href="https://mp.weixin.qq.com/s/GmRXqg4ay_Q5nr2x-0E41g">https://mp.weixin.qq.com/s/GmRXqg4ay_Q5nr2x-0E41g</a></p>
<p>《乌云回忆录》，是科技自媒体浅黑科技出品的专题。<br>2016年漏洞平台乌云关停。时隔一年，我试图走访那些和乌云相关的人，了解他们对网络安全、白帽子黑客，以及这个世界的看法。愿这些记录可以引发更多人的思考。<br>每个人都有自己的立场和理由，他们的愤怒、恐惧和自私本就情有可原。我只祈祷自己有一双忠诚的眼睛，注脚这个世界的美好或荒凉。<br>本文是对前乌云合伙人邬迪的采访，是为《乌云回忆录》第一篇。</p>
</blockquote>
<h2 id="邬迪：乌云完成了使命">邬迪：乌云完成了使命</h2><blockquote>
<p>乌云完成了它的使命。</p>
</blockquote>
<p>邬迪说。</p>
<p>邬迪，前漏洞平台“乌云”合伙人，如今他加入了一家安全创业公司。</p>
<p>2016年7月20日，乌云页面突然显示“升级公告”，关闭至今。2017年11月12日，距离“乌云事件”480天，我坐在邬迪对面。这个故事的另一个主人公是方小顿，人称剑心，“乌云”创始人。和邬迪一样，方小顿也在等待乌云事件最终的结果。</p>
<p>在一家咖啡馆里，邬迪和我讲了一些被尘封的往事：</p>
<h2 id="（一）">（一）</h2><p>我认识方小顿，是在2012年。</p>
<p>那是我在老牌 IT 公司深信服工作的第7年。</p>
<p>有同事找到我说，有个叫做“乌云”的媒体曝光了我们产品的一个漏洞。作为品牌总监，我得想办法“平事儿”。</p>
<p>我设法找到了乌云联系人的电话，电话那头传来了方小顿沙哑的声音。</p>
<p>他说，乌云不是媒体，而是漏洞平台。漏洞是民间的“白帽子黑客”提交的，把漏洞公开就是为了让中国的企业都能够重视网络安全。我说，太感谢了，我们已经重视了，并且修复了漏洞，是否有可能把帖子删掉呢？他说，这个恐怕没可能。只要发到乌云网站上的漏洞，就没有办法删除。每个帖子，都是一盏警示灯，灯亮得足够多，企业才会足够重视自己的安全建设。</p>
<p>我有点奇怪，这个人的话语逻辑里不包含“钱”。于是我搜索了“方小顿”，知道他是一个资深的安全专家。曾经供职百度，还和李彦宏一起上过《天天向上》，唱了一首惨不忍睹的歌。除此之外，别无其他。</p>
<p>几个星期以后，我北上北京，专门约他喝咖啡。</p>
<p>希格玛大厦的硬盘咖啡，我见到了他。长发及肩，不修边幅，牛仔裤、旧短袖、夹板拖鞋，声调不高但逻辑清楚。挺黑客的。</p>
<p>我再一次提出删帖的要求，暗示可以出些钱，他拒绝了。做了这么多年市场，我能听出来一个人是否真的不想要钱。于是我死心了，反倒对“乌云”有了更多的兴趣。</p>
<p>方小顿说，离开百度时他的级别是 T7，如果继续待下去还能更高，这个级别意味着衣食无忧前程似锦。但他坚信自己另有使命。他说安全圈太封闭了，这么多互联网公司漏洞百出，个人信息不断被黑客窃取，电信诈骗、网络攻击已经到了令人发指的地步。然而公众却没有渠道得知真相，任由自己的隐私权利被贩卖和侵害。需要有人把真相说出来，他深信做这件事的人应该是自己。</p>
<p>他设想的模式是：</p>
<blockquote>
<p>鼓励“白帽子黑客”——民间对网络安全技术感兴趣的技术人员——提交各个企业的漏洞，乌云审核之后无条件公开。白帽子在这个平台上获得认可、技术交流和荣誉感，企业在这里获得自己的漏洞详情和危机感，鞭策自己提高安全性。</p>
</blockquote>
<p>这就是后来著名的<strong>“乌云模式”</strong>。这个模式让当时的我热血沸腾，当然后来也改写了我们所有人的命运。</p>
<p>两年以后，我选择加入乌云。另一位创始人“疯狗”跟我回忆，我认识方小顿的2012年乌云已经成立三年，那时只有两三个人，所有人住在民宅里，不仅不领工资，而且都是把自己的积蓄在往里填。他们相信自己在做一件伟大的事。<br>]]>
    
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[thought]]></title>
    <link href="http://www.mxoxw.com/b/2017/11/thought/"/>
    <id>http://www.mxoxw.com/b/2017/11/thought/</id>
    <published>2017-11-13T08:14:49.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<p>Everything happens for a reason.</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Everything happens for a reason.</p>
]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[EFB使用webhook模式]]></title>
    <link href="http://www.mxoxw.com/b/2017/11/efb-shi-yong-webhook-mo-shi/"/>
    <id>http://www.mxoxw.com/b/2017/11/efb-shi-yong-webhook-mo-shi/</id>
    <published>2017-11-11T15:29:26.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<h2 id="添加配置">添加配置</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">eh_telegram_master = &#123;</span><br><span class="line">    <span class="string">"flag"</span>: &#123;</span><br><span class="line">        <span class="string">"webhook_url"</span>: <span class="string">"http://example.com"</span>,</span><br><span class="line">        <span class="string">"port"</span>: <span class="number">5000</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"token"</span>: <span class="string">"12345678:QWFPGJLUYarstdheioZXCVBKM"</span>,</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<h2 id="修改polling_from_tg">修改polling_from_tg</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># self.bot.start_polling(timeout=10)</span></span><br><span class="line">webhook_url = <span class="keyword">self</span>._flag(<span class="string">'webhook_url'</span>, <span class="string">''</span>)</span><br><span class="line">port = <span class="keyword">self</span>._flag(<span class="string">'port'</span>, <span class="number">80</span>)</span><br><span class="line"><span class="keyword">if</span> webhook_url != <span class="string">''</span><span class="symbol">:</span></span><br><span class="line">    token = getattr(config, <span class="keyword">self</span>.channel_id)[<span class="string">'token'</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> webhook_url.endswith(<span class="string">'/'</span>)<span class="symbol">:</span></span><br><span class="line">        webhook_url += <span class="string">'/'</span></span><br><span class="line">    webhook_url += token</span><br><span class="line">    <span class="keyword">self</span>.bot.start_webhook(<span class="string">'127.0.0.1'</span>, port, token)</span><br><span class="line">    <span class="keyword">self</span>.bot.bot.setWebhook(webhook_url=webhook_url)</span><br><span class="line">    <span class="comment"># self.logger.critical("webhook_url: %s" % webhook_url)</span></span><br><span class="line"><span class="symbol">else:</span></span><br><span class="line">    <span class="keyword">self</span>.bot.start_polling(timeout=<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<h2 id="修改nginx配置">修改nginx配置</h2><p>转发回调请求到<code>http://127.0.0.1:5000</code></p>
<a id="more"></a>
<p>几点需要注意的问题</p>
<blockquote>
<p>证书问题，如果使用Let’s Encrypt签发的证书，需要使用full chained certificate，否则不会收到回调请求</p>
<p>如果在同一目录下，使用多个微信号登录，容易导致“限制web微信登录”</p>
</blockquote>
<p>具体见 <a href="https://github.com/wolfsilver/ehForwarderBot" target="_blank" rel="external">https://github.com/wolfsilver/ehForwarderBot</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="添加配置">添加配置</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">eh_telegram_master = &#123;</span><br><span class="line">    <span class="string">"flag"</span>: &#123;</span><br><span class="line">        <span class="string">"webhook_url"</span>: <span class="string">"http://example.com"</span>,</span><br><span class="line">        <span class="string">"port"</span>: <span class="number">5000</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"token"</span>: <span class="string">"12345678:QWFPGJLUYarstdheioZXCVBKM"</span>,</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<h2 id="修改polling_from_tg">修改polling_from_tg</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># self.bot.start_polling(timeout=10)</span></span><br><span class="line">webhook_url = <span class="keyword">self</span>._flag(<span class="string">'webhook_url'</span>, <span class="string">''</span>)</span><br><span class="line">port = <span class="keyword">self</span>._flag(<span class="string">'port'</span>, <span class="number">80</span>)</span><br><span class="line"><span class="keyword">if</span> webhook_url != <span class="string">''</span><span class="symbol">:</span></span><br><span class="line">    token = getattr(config, <span class="keyword">self</span>.channel_id)[<span class="string">'token'</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> webhook_url.endswith(<span class="string">'/'</span>)<span class="symbol">:</span></span><br><span class="line">        webhook_url += <span class="string">'/'</span></span><br><span class="line">    webhook_url += token</span><br><span class="line">    <span class="keyword">self</span>.bot.start_webhook(<span class="string">'127.0.0.1'</span>, port, token)</span><br><span class="line">    <span class="keyword">self</span>.bot.bot.setWebhook(webhook_url=webhook_url)</span><br><span class="line">    <span class="comment"># self.logger.critical("webhook_url: %s" % webhook_url)</span></span><br><span class="line"><span class="symbol">else:</span></span><br><span class="line">    <span class="keyword">self</span>.bot.start_polling(timeout=<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<h2 id="修改nginx配置">修改nginx配置</h2><p>转发回调请求到<code>http://127.0.0.1:5000</code></p>]]>
    
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[bandwagonhost vps]]></title>
    <link href="http://www.mxoxw.com/b/2017/11/bandwagonhost-vps/"/>
    <id>http://www.mxoxw.com/b/2017/11/bandwagonhost-vps/</id>
    <published>2017-11-09T01:47:15.000Z</published>
    <updated>2019-12-09T13:28:23.000Z</updated>
    <content type="html"><![CDATA[<p>6.38%优惠码：BWH34QMFYT2R<br>力度还是不错的。</p>
<p><a href="https://bandwagonhost.com/aff.php?aff=2914" target="_blank" rel="external">aff链接</a><br><a href="https://bwh88.net/aff.php?aff=2914" target="_blank" rel="external">镜像站链接</a></p>
<p>现在的搬瓦工，只有KVM类型的VPS了。而且性价比方面比之前低了。<br>但相对来说，线路方面还是不错了。现在开始走高端路线，一些促销的VPS在使用上，数据中心选择空间相对少一些。</p>
]]></content>
    <summary type="html">
    <![CDATA[bandwagonhost 搬瓦工 优惠码 BWH34QMFYT2R]]>
    
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[域名迁移]]></title>
    <link href="http://www.mxoxw.com/b/2017/11/yu-ming-qian-yi/"/>
    <id>http://www.mxoxw.com/b/2017/11/yu-ming-qian-yi/</id>
    <published>2017-11-03T10:21:05.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<p>域名迁移<br>从www.scorpius.me迁移到<a href="http://www.mzozw.com" target="_blank" rel="external">www.mzozw.com</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>域名迁移<br>从www.scorpius.me迁移到<a href="http://www.mzozw.com" target="_blank" rel="external">www.mzozw.com</a></p>
]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[开始研究小程序]]></title>
    <link href="http://www.mxoxw.com/b/2017/11/kai-shi-yan-jiu-xiao-cheng-xu/"/>
    <id>http://www.mxoxw.com/b/2017/11/kai-shi-yan-jiu-xiao-cheng-xu/</id>
    <published>2017-11-03T02:29:25.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<p>现在开始研究，是不是有点晚了。。。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>现在开始研究，是不是有点晚了。。。</p>
]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[git多账户]]></title>
    <link href="http://www.mxoxw.com/b/2016/06/git-duo-zhang-hu/"/>
    <id>http://www.mxoxw.com/b/2016/06/git-duo-zhang-hu/</id>
    <published>2016-06-29T09:09:51.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"xxx@email.com"</span>   <span class="comment"> // 添加key</span></span><br><span class="line"></span><br><span class="line">Enter <span class="built_in">file</span> <span class="operator">in</span> which <span class="built_in">to</span> save <span class="operator">the</span> key (/c/Users/Administrator/.ssh/id_rsa): XXX  <span class="comment"> //修改默认名称</span></span><br></pre></td></tr></table></figure>
<p>.ssh目录添加config文件<br>修改内容<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Host *<span class="class">.a</span><span class="class">.com</span></span><br><span class="line">    IdentityFile ~/.ssh/id_rsa</span><br><span class="line">    User WWW</span><br><span class="line"></span><br><span class="line">Host github<span class="class">.com</span></span><br><span class="line">    IdentityFile ~/.ssh/github</span><br><span class="line">    User YYY</span><br><span class="line"></span><br><span class="line">Host git<span class="class">.coding</span><span class="class">.net</span></span><br><span class="line">    IdentityFile ~/.ssh/coding</span><br><span class="line">    User XXX</span><br><span class="line">    </span><br><span class="line"><span class="comment">// Host github2</span></span><br><span class="line"><span class="comment">//     HostName github.com</span></span><br><span class="line"><span class="comment">//     IdentityFile ~/.ssh/github</span></span><br><span class="line"><span class="comment">//     User YYY    </span></span><br><span class="line"><span class="comment">// 使用方式：</span></span><br><span class="line"><span class="comment">//      git clone github2:YYY/Mywork.git</span></span><br><span class="line"><span class="comment">//      git clone git@github2:YYY/Mywork.git</span></span><br></pre></td></tr></table></figure></p>
<p>参考：</p>
<blockquote>
<p><a href="http://www.cnblogs.com/BeginMan/p/3548139.html" target="_blank" rel="external">http://www.cnblogs.com/BeginMan/p/3548139.html</a><br><a href="http://www.tuicool.com/articles/7nMBVf" target="_blank" rel="external">http://www.tuicool.com/articles/7nMBVf</a></p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[git 添加多账户]]>
    
    </summary>
    
      <category term="git" scheme="http://www.mxoxw.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ssh自动登录]]></title>
    <link href="http://www.mxoxw.com/b/2016/05/ssh-zi-dong-deng-lu/"/>
    <id>http://www.mxoxw.com/b/2016/05/ssh-zi-dong-deng-lu/</id>
    <published>2016-05-25T06:01:25.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/expect -f</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> <span class="keyword">port</span> <span class="number">22</span></span><br><span class="line"><span class="built_in">set</span> <span class="keyword">user</span> XXX</span><br><span class="line"><span class="built_in">set</span> host XXX</span><br><span class="line"><span class="built_in">set</span> password XXX</span><br><span class="line"><span class="built_in">set</span> timeout -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">spawn ssh <span class="variable">$user</span>@<span class="variable">$host</span></span><br><span class="line">expect <span class="string">"*assword:*"</span></span><br><span class="line"></span><br><span class="line">send <span class="string">"$password\r"</span></span><br><span class="line">interact</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="l]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[2016-05-24面试]]></title>
    <link href="http://www.mxoxw.com/b/2016/05/2016-05-24-mian-shi/"/>
    <id>http://www.mxoxw.com/b/2016/05/2016-05-24-mian-shi/</id>
    <published>2016-05-24T09:05:26.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<ol>
<li>对系统架构的理解；</li>
<li>项目中疑难问题的解决过程；</li>
<li>职业规划；</li>
<li>项目的参与度；</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<ol>
<li>对系统架构的理解；</li>
<li>项目中疑难问题的解决过程；</li>
<li>职业规划；</li>
<li>项目的参与度；</li>
</ol>
]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[前端性能优化]]></title>
    <link href="http://www.mxoxw.com/b/2016/05/qian-duan-xing-neng-you-hua/"/>
    <id>http://www.mxoxw.com/b/2016/05/qian-duan-xing-neng-you-hua/</id>
    <published>2016-05-23T13:27:24.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>From: <a href="http://bubkoo.com/2015/11/19/prefetching-preloading-prebrowsing/" target="_blank" rel="external">http://bubkoo.com/2015/11/19/prefetching-preloading-prebrowsing/</a></p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>From: <a href="http://bubkoo.com/2015/11/19/prefetching-preloading-prebrowsing/" target="_blank" rel="external">http://bubko]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[git中文显示问题]]></title>
    <link href="http://www.mxoxw.com/b/2016/05/git-zhong-wen-xian-shi-wen-ti/"/>
    <id>http://www.mxoxw.com/b/2016/05/git-zhong-wen-xian-shi-wen-ti/</id>
    <published>2016-05-19T08:52:30.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<p>Git的本地化做得并不完善，命令的输出及命令的帮助还只能输出英文。目前中文用户最关心的问题是：是否可以在提交说明中使用中文？是否可以使用中文文件名或目录名？是否可以使用中文来命名分支或里程碑？简单地说，可以在提交说明中使用中文，但是需要对Git进行设置。至于用中文来命名文件，目录和引用，只有在使用UTF-8字符集的环境下（Linux，Mac OS X，Windows下的Cygwin）才可以，否则应尽量避免使用。</p>
<p>UTF-8字符集<br>Linux平台的中文用户一般会使用UTF-8字符集，Git在UTF-8字符集下可以工作得非常好：<br>在提交时，可以在提交说明中输入中文。<br>显示提交历史，能够正常显示提交说明中的中文字符。<br>可以添加名称为中文的文件，并可以在同样使用UTF-8字符集的Linux环境中克隆和检出。<br>可以创建带有中文字符的里程碑名称。<br>但是，在默认设置下，中文文件名在工作区状态输出，查看历史更改概要，以及在补丁文件中，文件名的中文不能正确地显示，而是显示为八进制的字符编码，示例如下：</p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git status -s</span><br><span class="line">?? "\<span class="number">350\257</span>\<span class="number">264\346</span>\<span class="number">230\216</span>.txt\n</span><br><span class="line">$ printf "\<span class="number">350\257</span>\<span class="number">264\346</span>\<span class="number">230\216</span>.txt\n"</span><br><span class="line">说明.txt</span><br></pre></td></tr></table></figure>
<p>通过将Git配置变量 core.quotepath 设置为false，就可以解决中文文件名称在这些Git命令输出中的显示问题，示例：</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git config --global core.quotepath <span class="literal">false</span></span><br><span class="line"><span class="variable">$ </span>git status -s</span><br><span class="line">?? 说明.txt</span><br></pre></td></tr></table></figure>
<p>GBK字符集</p>
<p>如果Linux平台采用非UTF-8的字符集，例如用<code>zh_CN.GBK</code>字符集编码，就要另外再做些工作了。<br>将显示提交说明所使用的字符集设置为gbk，这样使用 git  log 查看提交说明时才能够正确显示其中的中文：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global i18n<span class="class">.logOutputEncodiing</span> gbk</span><br></pre></td></tr></table></figure>
<p>设置录入提交说明时所使用的字符集，以便在commit对象中正确标注字符集。Git在提交时并不会对提交说明进行从GBK字符集到UTF-8的转换，但是可以在提交说明中标所使用的字符集，因此在非UTF-8字符集的平台中录入中文时需要用下面的指令设置录入提交说明的字符集，以便在commit对象中嵌入正确的编码说明。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global i18n<span class="class">.commitEncoding</span> gbk</span><br></pre></td></tr></table></figure>
<p>参考：<a href="http://www.open-open.com/lib/view/open1418264702277.html" target="_blank" rel="external">http://www.open-open.com/lib/view/open1418264702277.html</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Git的本地化做得并不完善，命令的输出及命令的帮助还只能输出英文。目前中文用户最关心的问题是：是否可以在提交说明中使用中文？是否可以使用中文文件名或目录名？是否可以使用中文来命名分支或里程碑？简单地说，可以在提交说明中使用中文，但是需要对Git进行设置。至于用中文来命名文件]]>
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[git保存用户名密码]]></title>
    <link href="http://www.mxoxw.com/b/2016/05/git-bao-cun-yong-hu-ming-mi-ma/"/>
    <id>http://www.mxoxw.com/b/2016/05/git-bao-cun-yong-hu-ming-mi-ma/</id>
    <published>2016-05-09T06:32:02.000Z</published>
    <updated>2019-12-09T13:25:41.000Z</updated>
    <content type="html"><![CDATA[<p>git版本：<a href="https://git-scm.com/download/" target="_blank" rel="external">https://git-scm.com/download/</a><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global credential<span class="class">.helper</span> wincred</span><br></pre></td></tr></table></figure></p>
<p>参考：<a href="http://stackoverflow.com/questions/11693074/git-credential-cache-is-not-a-git-command" target="_blank" rel="external">http://stackoverflow.com/questions/11693074/git-credential-cache-is-not-a-git-command</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>git版本：<a href="https://git-scm.com/download/" target="_blank" rel="external">https://git-scm.com/download/</a><br><figure class="highligh]]>
    </summary>
    
  </entry>
  
</feed>
